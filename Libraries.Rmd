---
title: "Libraries"
author: "Kabilan Kathiravel"
date: "05/12/2021"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
gradethis::gradethis_setup()
```


```{r cars, include = FALSE}
library(learnr)
library(tidyverse)
options(repos = "https://cran.stat.auckland.ac.nz/")
library(palmerpenguins)
library(sortable)
```

## Welcome

This is a tutorial on libraries in R and the pipe operator. If you are not sure what a library is in this context, please check out [this link](https://hbctraining.github.io/Intro-to-R-flipped/lessons/04_introR_packages.html) to get some idea before trying the exercises. For the pipe operator try [here](https://style.tidyverse.org/pipes.html).

In this tutorial you will learn about:

- Loading and installing libraries
- Getting help to understand a specific library in R
- The pipe operator (%>%)

## Install packages

Let's have a look at the [Palmer Penguins dataset](https://allisonhorst.github.io/palmerpenguins/articles/intro.html). It contains size measurements for three penguin species observed on three islands in Antarctica's Palmer Archipelago. 

If we don't have the package installed in R, we have to do so.

```{r installex1, echo=FALSE}
question("Which of the following commands installs the palmerpenguins library in R?",
  answer("install(palmerpenguins)"),
  answer("library(tidyverse)"),
  answer("install.packages('palmerpenguins')", correct = TRUE),
  answer("open sesame")
)
```
```{r installex2, echo=FALSE}
correct_penguins <- c(
    "install.packages('palmerpenguins')",
    "library(palmerpenguins)",
    "penguins %>% head()"
  )

question_rank(
  "Assuming you don't have the Palmer Penguins data in R on your computer, order the following so you can access the first six rows",
  answer(correct_penguins, correct = TRUE),
  answer(rev(correct_penguins), correct = FALSE,
         message = "Should you access the data before you load the library? Or load the library before you install it?"
         ),
  allow_retry = TRUE
)

```
```{r installex3, echo=FALSE}
question("Which of the following would be an appropriate step to take after getting this R error message - Error in library(palmerpenguins) : there is no package called ‘palmerpenguins’? Select all that apply. ?",
  answer("Yell at your computer"),
  answer("Running install.packages(\"palmerpenguins\")", correct = TRUE),
  answer("Check that \"palmerpenguins\" precisely is the name of the package that you want to use", correct = TRUE),
  answer("Ignore the error message and continue running the code that follows"),
  allow_retry = TRUE
)
```






## Load libraries and ask for help

To access the data, you need to load the "palmerpenguins" library into your R program. As it is now installed, you can do so!

```{r loadex1, exercise = TRUE}
    
```
```{r loadex1-check}
grade_result(
  pass_if(~identical(.result, library(palmerpenguins)))
)
```


You want to know more about the palmerpenguins library you are working with. There are two commonly used ways of doing this in R. Write down one below.

```{r helpex1, exercise = TRUE}
    
```
```{r helpex1-solution}
    help(palmerpenguins)
```

You need the tidyverse library to manipulate this data. You will also need ggplot2 to visualise it. Load each library in below.

```{r loadex2, exercise = TRUE}
    
```
```{r loadex2-solution}
    library(tidyverse)
    library(ggplot2)
```



## Piping

Now we have each library we need - excellent! Now we can get to looking at the data using the penguins dataset it is loaded to.

Let's have a look at the first six rows, using the pipe operator (%>%).

```{r pipeex1, exercise = TRUE}
    
```
```{r pipeex1-check}
grade_result(
  pass_if(~identical(.result, penguins %>% head()))
)
```

<div id="pipeex1-hint">
**Hint:** This is the use of the `head()` function.
</div>

Just from looking at the head, you may notice that there are some null (NA) values. It may be worthwhile getting a feel for which rows are like this. Start by filtering rows with null values for 'sex'.

```{r pipeex2, exercise = TRUE}
    
```

```{r pipeex2-check}
grade_result(
  pass_if(~identical(.result, penguins %>%
  filter(is.na(sex))))
)
```




## Visualisation

For visualisation we can use ggplot2. For example, we might want to see how flipper length varies with bill length. To do so, we can plot a scatter plot linking the two.

```{r visex1, exercise = TRUE}
    
```
```{r visex1-check}
grade_result(
  pass_if(~identical(.result, ggplot(data = penguins) +
  aes(x = bill_length_mm, y = flipper_length_mm) +
  geom_point()))
)
```


## Questions

```{r library-mcq, echo=FALSE}
question("Which of the following commands installs tidyverse in R?",
  answer("install(tidyverse)"),
  answer("library(tidyverse)"),
  answer("install.packages('tidyverse')", correct = TRUE),
  answer("open sesame")
)
```


